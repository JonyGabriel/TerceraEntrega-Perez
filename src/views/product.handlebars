<main>
  <div class="products">
    <h1>{{title}}</h1>
    <h2>Category: {{category}}</h2>
    <p>{{description}}</p>
    <h2>Stock: {{stock}}</h2>
    <h3>Price: ${{price}}</h3>
  </div>
  <button class="buy-button" id="{{_id}}">Buy</button>
</main>
<script>
  document.querySelector(".buy-button").addEventListener("click", async (e) => {
    if ("{{_id}}") {
      await fetch(`/api/carts/{{user.cart}}/product/{{_id}}`, {method: "PUT", headers: {"Content-Type": "application/json"}, body: JSON.stringify({quantity: 1})})
      window.location.replace("/products")
    }
    else {
      await fetch(`/api/carts/{{user.cart}}/product/{{id}}`, {method: "PUT", headers: {"Content-Type": "application/json"}, body: JSON.stringify({quantity: 1})})
      window.location.replace("/products")
    }
  })
</script>
<style>
  main {
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: 20px;
  }
  .buy-button {
    text-decoration: none;
    color: #fff;
    padding: 10px;
    width: 100%;
    background-color: rgb(47, 51, 47);
  }
</style>